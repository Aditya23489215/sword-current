
{% extends "blog/base.html" %}
{% load crispy_forms_tags %}
{% block content %}
  <div class="content-section col-bg">
    <form id="myform"  method="POST" enctype="multipart/form-data">
    <div class="media">
      <label>
        <div class="suji">
          <img class="rounded-circle account-img guji" src="{{ user.profile.profile_pic.url }}">
          <div class="overlay">
            <div class="beji">
            <span data-testid="camera" data-icon="camera">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
                <path fill="currentColor" d="M21.317 4.381H10.971L9.078 2.45c-.246-.251-.736-.457-1.089-.457H4.905c-.352 0-.837.211-1.078.468L1.201 5.272C.96 5.529.763 6.028.763 6.38v1.878l-.002.01v11.189a1.92 1.92 0 0 0 1.921 1.921h18.634a1.92 1.92 0 0 0 1.921-1.921V6.302a1.92 1.92 0 0 0-1.92-1.921zM12.076 18.51a5.577 5.577 0 1 1 0-11.154 5.577 5.577 0 0 1 0 11.154zm0-9.506a3.929 3.929 0 1 0 0 7.858 3.929 3.929 0 0 0 0-7.858z"></path>
              </svg>
            </span>
            <p>CHANGE IMAGE</p></div>
          </div>
        </div>
        <div style="display: none;" >{{ p_form|crispy }}</div>
      </label>
      <div class="media-body ml-4">
        <h2 class="account-heading">{{ user.username }}</h2>
        <p class="text-secondary">{{ user.email }}</p>
      </div>
    </div>

        {% csrf_token %}
        <fieldset class="form-group">
            <legend class="border-bottom mb-4">Update your profile here!</legend>
            {{ u_form|crispy }}

        </fieldset>
        <div class="form-group">
            <button class="btn btn-primary" type="submit">Update</button>
        </div>
    </form>
  </div>

  <script>
  document.getElementById("id_profile_pic").onchange = function() {myFunction()};
  function myFunction() {
    document.getElementById("myform").submit();
  }
  </script>
{% endblock content %}
